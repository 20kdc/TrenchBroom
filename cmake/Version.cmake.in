FILE(READ @APP_DIR@/version/version APP_VERSION_RAW)
STRING(REGEX MATCHALL "[0-9]" APP_VERSION_PARTS ${APP_VERSION_RAW})
LIST(GET APP_VERSION_PARTS 0 APP_VERSION_MAJOR)
LIST(GET APP_VERSION_PARTS 1 APP_VERSION_MINOR)
LIST(GET APP_VERSION_PARTS 2 APP_VERSION_MAINTENANCE)

EXECUTE_PROCESS(COMMAND "@GIT_EXECUTABLE@" rev-parse --short HEAD WORKING_DIRECTORY "@CMAKE_SOURCE_DIR@" OUTPUT_VARIABLE APP_VERSION_BUILD_ID OUTPUT_STRIP_TRAILING_WHITESPACE)
CONFIGURE_FILE(@APP_DIR@/version/Version.h.in @CMAKE_CURRENT_BINARY_DIR@/Version.h @ONLY)
