<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>TrenchBroom Help - Shaping Brushes</title>
	<link rel="StyleSheet" href="../sty/style.css" type="text/css" media="screen" />
	<meta name="author" content="Kristian Duske">
</head>
<body>
	<div id="container">
		<h2>Shaping Brushes</h2>
		The shape of a brush can be changed using several different tools. With the <a href="#face_dragging">face dragging</a> tool, you can quickly move faces, thereby changing the brushes size. The <a href="#using_the_clipping_tool">clipping tool</a> allows you to cut brushes into arbitrary shapes. You can <a href="#deleting_faces">delete</a> individual faces of a brush. TrenchBroom also comes with very powerful tools to edit the <a href="vertex_editing">vertices</a>, <a href="edge_editing">edges</a> and the <a href="face_editing">faces</a> of a brush.
		
		<a name="face_dragging"></a><h3>Face Dragging</h3>
		<img src="../../shrd/face_dragging_frontface.png" width="180" height="180" alt="Dragging a Front Face" class="inline">
		<p>Face dragging is actually a translation of a face along its normal. This means that you cannot move faces around freely, but are restricted to the face's normal as its single axis of movement. To drag a face, click and drag it with the <b>left mouse button</b> while holding the <b>command key (&#x2318;)</b>. If you select multiple faces and start dragging one of them, all faces will be moved along their normal. This way, you can change a brush's size in multiple dimensions at once. Note that if you have multiple brushes selected and you drag a face, every face of any selected brush that lies in the same plane as the dragged face will be moved, too. This allows you to quickly change the sizes of multiple brushes at once.</p>
		
		<br clear="all">
		<img src="../../shrd/face_dragging_backface.png" width="180" height="180" alt="Dragging a Back Face" class="inline">
		<p>You can also drag faces which are behind the brush. Hold the <b>command key (&#x2318;)</b> and move your mouse outside of a selected brush, but close to an outer edge of the brush. Since any edge belongs to exactly two faces, an outer edge belongs to one face that faces the camera and one face that faces away from the camera. The latter face is the one which you can drag if you start your drag just outside of an outer edge. Note that you can only drag faces which have at least one edge visible. If you want to drag faces which are completely on the back of the brush, you need to reposition the camera.</p>
		
		<br clear="all">
		<a name="using_the_clipping_tool"></a><h3>Using the Clipping Tool</h3>
		<p>The clipping tool an important tool to change the shapes of brushes because it can add and remove faces from a brush. It is not activated with a modifier key such as the shift key. To toggle the clip tool, you need to press the <b>C key</b> while brushes are selected. Afterwards, you will notice a green dot under your mouse cursor if you move the mouse over a selected brushes (see also the first of the following screenshots).</p>
		<p>The general principle of any clip tool is that it cuts one or several brushes by adding a face to them. Remember that brushes are made of faces, and each face defines a plane which is actually the boundary of a half space. The brushes volume is then the intersection of all the half spaces defined by its faces. If you add a new face to a brush, there are three possible outcomes:</p>
		<ul>
			<li>The halfspace defined by the new plane does not intersect the brushes volume at all, and as a result the brush becomes invalid and is deleted.</li>
			<li>The brushes volume is entirely contained in the halfspace defined by the new face, so nothing actually changes.</li>
			<li>The intersection of the brushes volume and the half space defined by the new face is smaller than the brushes volume. The result is that the new face is added to the brush and all other faces which intersect with the new face are cut off. Additionally, some faces may be removed from the brush. This is what the clipping tool is designed to do.</li>
		</ul>
		<p>The clipping tool allows you to define a plane (called the <b>clipping plane</b>) by placing at least two points in space. This plane is then added to the selected brushes as a new face, and some brushes are deleted, some are changed and some retain their shape as described above. Depending on the orientation of the clipping plane, different parts of the selected brushes are retained and deleted. The following screenshots show the three clipping modes of the clipping tool:</p>
		<div class="images">
			<img src="../../shrd/clipping_mode_1.png" width="180" height="180" alt="Clipping Mode 1">
			<img src="../../shrd/clipping_mode_2.png" width="180" height="180" alt="Clipping Mode 2">
			<img src="../../shrd/clipping_mode_3.png" width="180" height="180" alt="Clipping Mode 3">
			<div class="imagecaption">The modes of the clipping tool.</div>
		</div>

		<p>The first screenshot shows the clipping plane in its default orientation. Here, only one part of the brush is kept and the other is deleted. The second screenshot shows the same clipping plane, but with the opposite orientation, so the part of the brush that would be deleted in the first screenshot is retained and vice versa. And finally the third screenshot shows the third mode of the clipping tool. Here, both parts of the brush are retained, so the brush is split in two along the clipping plane.</p>
		<p>Now how does the clipping tool work in practice? After it is activated, you can place up to three points in space. These points define the clipping plane. The following screenshots should give you an idea how this works:</p>

		<div class="images">
			<img src="../../shrd/clipping_1.png" width="150" height="150" alt="Clipping Tool with One Point">
			<img src="../../shrd/clipping_2.png" width="150" height="150" alt="Clipping Tool with Two Points">
			<img src="../../shrd/clipping_3.png" width="150" height="150" alt="Clipping Tool with Three Points">
			<img src="../../shrd/clipping_4.png" width="150" height="150" alt="Clipped Brush">
			<div class="imagecaption">The clipping tool needs at least two points.</div>
		</div>
		<p>The green dots represent the clipping points. The clipping tool needs at least two clipping points to create a clipping plane. You can place clipping points by clicking with the <b>left mouse button</b>, but you can only place clipping points on the faces of the currently selected brushes. However, you can drag clipping points off the faces (see below). You can delete the most recently placed clipping point by hitting the <b>backspace key (&#x232B;)</b>. Once you have placed two points, the clipping tool will try to guess a clipping plane for you. If you need more control over the clipping plane, you need to plane a third point. Now the clipping plane will be represented by a green triangle that has the three points as vertices (see third screenshot).</p>
		<p>The clipping tool always gives you an instant preview of how the clipped brushes will look like. Once you are satisfied with the clipping plane, you can hit <b>return (&#x21A9;)</b> to perform the clip. You can toggle between the three modes of the clipping tool using the <b>tab key (&#x21E5;)</b>. If you would like to cancel the clipping operation, simply deactivate the clipping tool by hitting <b>C</b>.</p>

		<img src="../../shrd/clipping_drag_point.png" width="260" height="203" alt="Dragging a Clip Point" class="inline">
		<p>In certain situations, you have to place clipping points which are not on the surface of any of the selected brushes. If you find that you to place a clipping point somewhere in the void, you can drag that clipping point off any of the faces of the selected brushes. Simply click on any face of a selected brush and <b>drag with the left mouse button</b>. You will see a red grid which will help you place the point. The grid is aligned with the face on which you started your drag and it represents the plane on which you can place the clipping point. You can also edit already placed clipping points by dragging them around with the <b>left mouse button</b>.</p>
		<br clear="all">
		<p>You should practice a bit with the clipping tool. Often, you can change a brush into a desired shape much quicker using the clipping tool than if you use one of the other options described in this section.</p>

		<a name="deleting_faces"></a><h3>Deleting Faces</h3>
		<p>Sometimes, it is useful to delete a face of a brush. For example, in the following screenshots, deleting the selected face changes the brush's shape into a cuboid.</p>
		<div class="images">
			<img src="../../shrd/delete_face_1.png" width="300" height="253" alt="Deleting a Face">
			<img src="../../shrd/delete_face_2.png" width="300" height="253" alt="Deleting a Face">
			<div class="imagecaption">Deleting a face.</div>
		</div>
		<p>However, it is not always possible to delete a face. You can only delete faces if the brush does not become invalid as a result. Consider the cuboid in the second screenshot as an example. If you delete any face of this cuboid, the brush is no longer closed and thus invalid. Hence, none of its faces can be deleted.</p>

		<a name="vertex_editing"></a><h3>Vertex Editing</h3>
		<p>The vertex editing mode allows you to move the vertices of a brush and to split edges and faces by adding new vertices to them. To activate the vertex editing mode, press <b>V</b>. To deactivate the vertex editing mode, press <b>V</b> again. Once vertex editing has been activated, you will notice blue handles at the vertices, edges and faces of the selected brushes. Note that these handles will only be visible if you are within a certain distance to the brush.You can move vertices horizontally by <b>left clicking and dragging</b> them with the mouse. To move them vertically, hold the <b>option key (&#x2325;)</b> while dragging. You can also edit vertices which are behind the brush - just click and drag their handle.</p>
		<div class="images">
			<img src="../../shrd/vertex_editing.png" width="300" height="261" alt="Vertex Editing Mode">
			<img src="../../shrd/vertex_editing_vertex_moved.png" width="300" height="261" alt="One Vertex Moved">
			<div class="imagecaption">Vertex Editing</div>
		</div>
		<p>You can move vertices freely as long as the brush does not become invalid. In such cases, the vertex you are moving will disappear. TrenchBroom will split and merge faces automatically as you move vertices around. In the second screenshot above, you can see that the left face of the cuboid has been split into two triangles as a result of one of its vertices being moved.</p>
		<div class="images">
			<img src="../../shrd/vertex_editing.png" width="300" height="261" alt="Vertex Editing Mode">
			<img src="../../shrd/vertex_editing_edge_split.png" width="300" height="261" alt="One Edge Split">
			<div class="imagecaption">Edge splitting</div>
		</div>
		<p>You can also add new vertices to a brush by either splitting an edge or splitting a face. To split an edge, click on the blue handle in the center of the edge and drag it away from the brush. In the above screenshot, you can see how the upper edge of the right face has been split in two, resulting in a new vertex.</p>
		<div class="images">
			<img src="../../shrd/vertex_editing.png" width="300" height="261" alt="Vertex Editing Mode">
			<img src="../../shrd/vertex_editing_face_split.png" width="300" height="261" alt="One Face Split">
			<div class="imagecaption">Face splitting</div>
		</div>
		<p>To split a face, click on the blue handle in the center of the face and drag it away from the brush. Look at the screenshot above for an example. Here, the top face of the brush has been split into four triangles which share the newly created vertex.</p>
		<p>You can also merge vertices by moving one vertex onto another vertex, but only if the two vertices belong to the same edge. Otherwise, the brush would become invalid.</p>
		<p>Face and edge splitting are very useful operations for creating terrain and natural rock formations. Play around with these features and you will quickly get an idea how they work.</p>

		<a name="edge_editing"></a><h3>Edge Editing</h3>
		<p>The edge editing mode can be activated and deactivated by pressing <b>E</b>. If edge editing is active, you will see light blue handles at the center of each edge. Again, these handles are only shown if you are close to a selected brush. Like vertices, edges can be moved horizontally by <b>left clicking and dragging</b> them with the mouse and vertically by holding the <b>option key (&#x2325;)</b> while dragging.
		<div class="images">
			<img src="../../shrd/edge_editing.png" width="300" height="241" alt="Edge Editing Mode">
			<img src="../../shrd/edge_editing_1.png" width="300" height="241" alt="One Edge Moved">
			<div class="imagecaption">Edge Editing</div>
		</div>
		<p>In the screenshot above on the right, you can see that the upper edge of the left face has been moved horizontally inside the brush. Moving an edge is basically, just a shortcut for moving the two vertices of the edge, so TrenchBroom also splits and merges faces automatically just like in vertex editing mode.</p>
		<div class="images">
			<img src="../../shrd/edge_editing_1.png" width="300" height="241" alt="One Edge Moved">
			<img src="../../shrd/edge_editing_2.png" width="300" height="241" alt="Edge moved sideways">
			<div class="imagecaption">Edge Editing 2</div>
		</div>
		<p>To illustrate these concepts, the screenshots above show the effect of moving the edge sideways. You can see that the front right face of the brush has been split into triangles.</p>

		<a name="face_editing"></a><h3>Face Editing</h3>
		<p>Finally, you can edit faces in the face editing mode, which is activated and deactivated by pressing <b>F</b>.  Using this mode, you can move all vertices which belong to one face by <b>left dragging </b>the purple face handle. To move the face vertically, hold the <b>option key (&#x2325;)</b> while dragging.</p>
		<div class="images">
			<img src="../../shrd/face_editing_1.png" width="300" height="273" alt="Face Editing Mode">
			<img src="../../shrd/face_editing_2.png" width="300" height="273" alt="Face Sheared">
			<div class="imagecaption">Face Editing 2</div>
		</div>
		<p>As you can see in the screenshots above, moving a face is basically like shearing brush. Of couse, you can also change the size of the brush by dragging the face towards or away from the brush's center. Note that, depending on the shape of the brush, face editing can have a different effect than <a href="#face_dragging">face dragging</a>. Consider the following screenshots for an example.</p>
		<div class="images">
			<img src="../../shrd/face_dragging_vs_editing_1.png" width="200" height="181" alt="Frustrum">
			<img src="../../shrd/face_dragging_vs_editing_2.png" width="200" height="181" alt="Frustrum after Face Editing">
			<img src="../../shrd/face_dragging_vs_editing_3.png" width="200" height="181" alt="Frustrum after Face Dragging">
			<div class="imagecaption">Face editing vs. face dragging</div>
		</div>
		<p>In the first screenshot, you see a brush shaped like a frustrum (a frustrum is a pyramid with its tip cut off). The top face is a square with a side length of four grid units. The second screenshot shows the effect of moving the top face upward using face editing mode. As you can see, the side length of the square has not changed - this is because face moving is tantamount to moving the vertices of the face in parallel. In the third screenshot however, you see the effect of dragging the face upwards. In this case, the side length of the top square has changed. Both operations have their advantages and disadvantages and it depends on the context which one you should use.</p>
		<p>This concludes the section about shaping brushes. You have learned how to drag faces, clip brushes, delete individual faces and how to use the vertex, edge and face editing modes. Together, these tools allow you to create complex brush shapes quickly and precisely.</p>
	</div>
</body>
</html>